---
title: 'Sort Amazon wish list'
updatedAt: '2022-01-02 12:00:00'
---

This is oddly specific, silly and potentially already broken, but: the Amazon website is built in a way where if you load a wish list that is several pages long and you want to sort the items by price, it would sort them for each page individually rather than sort the whole list. So I wrote a script that parses the list’s DOM elements and outputs to the console a sorted list — in this case sorted by price drop percentage.

I use this to hunt for good book deals.

```javascript
(function () {
  const items = [];

  document.querySelectorAll('div[id^="itemInfo"]').forEach(el => {
    const linkedName = el.querySelector('a[id^="itemName"]');
    const name = linkedName.textContent.trim();
    const url = linkedName.href;
    const price = parseFloat(
      el
        .querySelector('span[id^="itemPrice"] .a-offscreen')
        .textContent.replace(/\$/g, ''),
    );

    let priceDropPctg;
    const priceDropEl = el.querySelector('span[id^="itemPriceDrop"]');

    if (priceDropEl) {
      const priceDropContent = priceDropEl.textContent;

      if (priceDropContent.includes('%')) {
        priceDropPctg = parseInt(
          priceDropContent.replace(/price dropped /i, '').replace('%', ''),
        );
      } else if (priceDropContent.includes('$')) {
        priceDropPctg = 0;
      }
    } else {
      priceDropPctg = 0;
    }

    items.push({ name, url, price, priceDropPctg });
  });

  const result = items.sort((a, b) => b.priceDropPctg - a.priceDropPctg);

  console.table(result);
})();
```
